{% load static %}
{% load i18n %}
{% load horilla_tags %}
<style>
    .htmx-indicator {
        display: none;
    }
    .htmx-request .htmx-indicator {
        display: inline-block;
    }
</style>
<div class="p-6">
    <div class="flex justify-between items-center mb-2">
        <h2 class="text-md font-semibold">{% trans 'Select Delete Mode'%}</h2>
        <button onclick="closeDeleteModeModal();closeModal();" class="text-gray-500 hover:text-red-500 text-xl cursor-pointer">
            <img src="{% static 'assets/icons/close.svg' %}" alt="Close" />
        </button>
    </div>
    <div >
        <p class="text-sm text-[#474747] mb-3">
            {% trans 'Choose the deletion mode for' %} {{ model_verbose_name }} "{{ object }}".
        </p>
        <div class="mt-3 mb-3 p-3 bg-yellow-50 border border-[#f3edb0] rounded-lg">
            <div class="text-xs text-yellow-800">
                <ul class="list-disc list-inside space-y-1">
                    <li>
                        {% trans "Hard Delete will permanently delete data."%}
                    </li>
                    <li>
                        {% trans "Soft Delete allows you to restore deleted records." %}
                    </li>
                </ul>
            </div>
        </div>
        <div class="flex gap-3 justify-end">
            <!-- Hard Delete Option -->
            <form
                hx-post="{{ search_url }}"
                hx-target="#modalBox"
                hx-swap="innerHTML"
                hx-push-url="false"
                hx-on:click="openModal()"
                hx-indicator="#hard-delete-spinner"
                style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="check_dependencies_with_mode">
                <input type="hidden" name="delete_mode" value="main_hard">
                <input type="hidden" name="record_id" value="{{ record_id }}">
                <input type="hidden" name="view_id" value="{{ view_id|safe }}">
                <button type="submit" class="text-sm px-6 py-2 bg-[#f11633] text-white rounded-md hover:bg-[#bb1b30]">
                    <span class="flex items-center gap-2">
                        <span id="hard-delete-spinner" class="htmx-indicator">
                            <img src="{% static '/assets/icons/spinner.svg' %}" alt="Loading..." width="25" />
                        </span>
                        {% trans 'Hard Delete'%}
                    </span>
                </button>
            </form>

            <!-- Soft Delete Option -->
            <form
                hx-post="{{ search_url }}"
                hx-target="#modalBox"
                hx-swap="innerHTML"
                hx-push-url="false"
                hx-on:click="openModal()"
                hx-indicator="#soft-delete-spinner"
                style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="check_dependencies_with_mode">
                <input type="hidden" name="delete_mode" value="main_soft">
                <input type="hidden" name="record_id" value="{{ record_id }}">
                <input type="hidden" name="view_id" value="{{ view_id|safe }}">
                <button type="submit" class="text-sm px-6 py-2 bg-[#21b442] text-white rounded-md hover:bg-[#198230] relative">
                    <span class="flex items-center gap-2">
                        <span id="soft-delete-spinner" class="htmx-indicator">
                            <img src="{% static '/assets/icons/spinner.svg' %}" alt="Loading..." width="25" />
                        </span>
                        {% trans 'Soft Delete'%}
                    </span>
                </button>
            </form>
        </div>
    </div>
</div>
